<div class="container text-center">
  <div class="row mb-3">
    <div class="col d-flex align-item-center">
      <h3>Semua Node</h3>
    </div>
    <div class="col d-flex justify-content-end align-item-center gap-3">
      <a href="/node/create" class="d-flex justify-content-end">
        <button class="btn btn-primary"><i class="fa fa-plus me-2"></i>Add Node</button>
      </a>
      <a href="/channel/create" class="d-flex justify-content-end">
        <button class="btn btn-success"><i class="fa fa-plus me-2"></i>Add
          Channel</button>
      </a>
    </div>
  </div>
  <div class="row mb-5 d-flex justify-content-start">
    <div class="form-outline mb-4" style="max-width: 240px;">
      <input
        class="form-control form-control-sm"
        type="number"
        name="limit"
        id="limit"
        onchange="changeLimit()"
      />
      <label class="form-label" for="limit">Limit Feed</label>
    </div>
  </div>
  <div class="row">
    <table class="table table-striped table-light table-hover">
      <thead>
        <tr>
          <th scope="col">Id Node</th>
          <th scope="col">Name</th>
          <th scope="col">Location</th>
          <th scope="col">Is Public</th>
          <th scope="col">Id Hardware Node</th>
          <th scope="col">Id Hardware Sensor</th>
          <th scope="col">Field Sensor</th>
          <th scope="col">Feed</th>
          <th scope="col">Id User</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {{#each nodes as |n|}}
          {{#with n}}
            <tr>
              <th scope="row">{{idNode}}</th>
              <td>{{name}}</td>
              <td>{{location}}</td>
              <td>{{isPublic}}</td>
              <td>
                {{idHardwareNode}}
              </td>
              <td>
                <ol>
                  {{#each idHardwareSensor as |id|}}
                    {{#if id.valid}}
                      <li>{{id.int64}}</li>
                    {{else}}
                      <li>null</li>
                    {{/if}}
                  {{/each}}
                </ol>
              </td>
              <td>
                <ol>
                  {{#each fieldSensor as |field|}}
                    {{#if field.valid}}
                      <li>{{field.string}}</li>
                    {{else}}
                      <li>null</li>
                    {{/if}}
                  {{/each}}
                </ol>
              </td>
              <td>
                <ol>
                  {{#each feed as |f|}}
                    {{#with f}}
                      <li> {{time}}</li>
                      <ol>
                        {{#each value as |v|}}
                          {{#if v.valid}}
                            <li>{{v.float64}}</li>
                          {{else}}
                            <li>null</li>
                          {{/if}}
                        {{/each}}
                      </ol>
                    {{/with}}
                  {{/each}}
                </ol>
              </td>
              <td>{{idUser}}</td>
              <td>
                <a href="/node/{{idNode}}">
                  <button
                    type="button"
                    class="btn btn-primary btn-lg btn-floating"
                  >
                    <i class="fas fa-eye"></i>
                  </button>
                </a>
                <a href="/node/{{idNode}}/edit">
                  <button
                    type="button"
                    class="btn btn-success btn-lg btn-floating"
                  >
                    <i class="fas fa-edit"></i>
                  </button>
                </a>
                <a href="/channel/create?id_node={{idNode}}">
                  <button
                    type="button"
                    class="btn btn-info btn-lg btn-floating"
                  >
                    <i class="fas fa-plus"></i>
                  </button>
                </a>
                <button
                  type="button"
                  class="btn btn-danger btn-lg btn-floating"
                  onclick="deleteItem('node', {{idNode}}, '{{name}}')"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          {{/with}}
        {{/each}}
      </tbody>
    </table>
  </div>
</div>
<script src="/static/js/node.js"></script>